\documentclass[12pt]{article}

% For document layout and formatting
\usepackage[a4paper, vmargin=2.54cm,
hmargin=2.54cm]{geometry}
\usepackage{etoolbox,lineno}
\linespread{1.1} % 1.6 for double spacing and 1.3 for one-and-a-half spacing
\usepackage[T1]{fontenc}
\usepackage{textcomp}
\usepackage[utf8]{inputenc}
\usepackage[english]{babel}
\usepackage{subfiles}
\usepackage[toc,page]{appendix}
\usepackage[acronym]{glossaries}
\usepackage{xargs} % Use more than one optional parameter in a new commands

% For to-do lists
\usepackage[colorinlistoftodos,
            prependcaption,
            textsize=tiny]
            {todonotes}
\usepackage{marginnote}
\renewcommand{\marginpar}{\marginnote}

\definecolor{OliveGreen}{RGB}{181,179,92}
\definecolor{Plum}{RGB}{142,69,133}
\definecolor{Goldenrod}{RGB}{245,198,60}

\newcommandx{\tobedone}[2][1=]{
    \todo[linecolor=red,
            backgroundcolor=red!25,
            bordercolor=red,#1]{#2}
}
\newcommandx{\unsure}[2][1=]{
    \todo[linecolor=Goldenrod,
            backgroundcolor=Goldenrod!25,
            bordercolor=Goldenrod,#1]{#2}
}
\newcommandx{\change}[2][1=]{
    \todo[linecolor=blue,
            backgroundcolor=blue!25,
            bordercolor=blue,#1]{#2}
}
\newcommandx{\info}[2][1=]{
    \todo[linecolor=OliveGreen,
            backgroundcolor=OliveGreen!25,
            bordercolor=OliveGreen,#1]{#2}
}
\newcommandx{\improvement}[2][1=]{
    \todo[linecolor=Plum,
            backgroundcolor=Plum!25,
            bordercolor=Plum,#1]{#2}
}
\newcommandx{\thiswillnotshow}[2][1=]{
    \todo[disable,#1]{#2}
}

% For fonts and symbols
\usepackage{times}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{amsthm}
\usepackage{amsfonts}
\usepackage{xspace}
\usepackage{siunitx}
\sisetup{
    mode=text,
    per-mode=symbol,
    product-units=single,
    range-units=single,
    group-separator={,},
}

% For references
\usepackage[backend=biber, style=ieee]{biblatex}
\addbibresource{refs.bib}

\usepackage[capitalise]{cleveref} % [capitalise,noabbrev] options
\usepackage{csquotes}

% For equations
\usepackage{extramarks}
\usepackage{float}
\usepackage{cancel} % to use diagonal strikethrough to zero
\usepackage{physics} % to use absolute and norm (for vectors) symbols
\usepackage{array}
\usepackage{tabularx}
\usepackage{calc}
\usepackage{microtype}
\usepackage[plain]{algorithm}
\usepackage{algpseudocode}

% For plotting
\usepackage{pgfplots}
\usepackage{pgfplotstable}
% \pgfplotstabletypeset{search path={tables}}
\pgfplotsset{
    compat=newest,
    % ignore zero/.style={%
    %     #1ticklabel={\ifdim\tick pt=0pt 0 \else\pgfmathprintnumber{\tick}\fi}
    %     },
    yticklabel={\ifdim\tick pt=0pt 0 \else\pgfmathprintnumber{\tick}\fi},
    table/search path={tables,graphs},
} % Allows to place the legend below plot
\usepgfplotslibrary{units} % Allows to enter the units nicely

% For figures
\usepackage{graphicx}
\graphicspath{ {./images/} }
\usepackage{wrapfig}
\usepackage{subfig}
\usepackage{tikz}
\usetikzlibrary{automata,positioning,calc,fit,matrix}

% For tables
\usepackage{afterpage, longtable}
\usepackage{xltabular}
\usepackage{booktabs}
\usepackage{multirow}
\usepackage{diagbox}
\usepackage{makecell}
\usepackage{caption}
\DeclareCaptionLabelSeparator{ieee}{.\quad}
\captionsetup[table]{
    skip=5pt,
    labelsep=ieee,
}
\captionsetup[figure]{
    name=Fig.,
    labelsep=ieee,
}

% For better lists
\usepackage{enumerate}

% For dummy text
\usepackage{blindtext}
\usepackage{lipsum}

\addto\captionsenglish{%
  \renewcommand{\contentsname}%
    {Table of Contents}%
}

\renewcommand{\appendixtocname}{Appendix}
\renewcommand{\appendixpagename}{\Large Appendix}

% Common shortcuts
\newcommand{\anafi}{\textsc{anafi}\xspace}
\newcommand{\gym}{the \textsc{o}pen\textsc{ai} 
    \textsc{g}ym\xspace} 
\newcommand{\id}{\textsc{id}\xspace} 

%%% List of abbreviations
%%% note: do not capitalize unless it is a proper noun
%%%       and use the \textsc command as a best practice

% Machine learning
\newacronym{ml}{\textsc{ml}}{machine learning}
\newacronym{ai}{\textsc{ai}}{artificial intelligence}
\newacronym{dl}{\textsc{dl}}{deep learning}
\newacronym{rl}{\textsc{rl}}{reinforcement learning}
\newacronym{drl}{\textsc{drl}}{deep reinforcement learning}
\newacronym{dqn}{\textsc{dqn}}{Deep Q-Network}
\newacronym{mdp}{\textsc{mdp}}{Markov decision process}
\newacronym{pomdp}{\textsc{pomdp}}{partially observable Markov decision process}
\newacronym{cnn}{\textsc{cnn}}{convolutional neural network}

% Simulation
\newacronym{sitl}{\textsc{sitl}}{software-in-the-loop}
\newacronym{uav}{\textsc{uav}}{unmanned aerial vehicle}
\newacronym{ros}{\textsc{ros}}{the Robot Operating System}

% Institutions
\newacronym{ieee}{\textsc{ieee}}{the Institute of Electrical and Electronics Engineers}
\newacronym{acm}{\textsc{acm}}{the Association for Computing Machinery}

% Technologies
\newacronym{gps}{\textsc{gps}}{the Global Positioning System}
\newacronym{lidar}{\textsc{lidar}}{Light Detection and Ranging}
\newacronym{fov}{\textsc{fov}}{field of view}
\newacronym{sdf}{\textsc{sdf}}{Simulation Description Format}

% never expand the these acronyms
\glsunset{ieee}
\glsunset{acm}
\glsunset{gps}
\glsunset{lidar}

\let\linenumbers\nolinenumbers\nolinenumbers

\begin{document}

\subfile{sections/title}

\pagenumbering{roman}

\begin{linenumbers}
\makeatletter
\patchcmd{\@startsection}{\@ifstar}{\nolinenumbers\@ifstar}{}{}
\patchcmd{\@xsect}{\ignorespaces}{\linenumbers\ignorespaces}{}{}
\makeatother

\addcontentsline{toc}{section}{Declaration}
\section*{Declaration} \label{sec:declaration}
\subfile{sections/declaration}
\newpage

\addcontentsline{toc}{section}{Abstract}
\section*{Abstract} \label{sec:abstract}
\subfile{sections/abstract}
\newpage

\addcontentsline{toc}{section}{Acknowledgment}
\section*{Acknowledgment} \label{sec:acknowledgement}
\subfile{sections/acknowledgment}
\newpage
\end{linenumbers}

\glsunsetall

\nolinenumbers

\tableofcontents
\newpage

\addcontentsline{toc}{section}{\listfigurename}
\listoffigures
\addcontentsline{toc}{section}{\listtablename}
\listoftables
\newpage

\pagenumbering{arabic}

\glsresetall

\glsunset{ieee}
\glsunset{acm}
\glsunset{gps}
\glsunset{lidar}

\begin{linenumbers}
\makeatletter
\patchcmd{\@startsection}{\@ifstar}{\nolinenumbers\@ifstar}{}{}
\patchcmd{\@xsect}{\ignorespaces}{\linenumbers\ignorespaces}{}{}
\makeatother

\section{Introduction and Motivation} \label{sec:intro}
\subfile{sections/introduction}

\section{Background and Related Work} \label{sec:background}
\subfile{sections/background}

\section{Requirements Analysis} \label{sec:requirements}
\subfile{sections/requirements}

\section{Proposed Solution} \label{sec:solution}
\subfile{sections/solution}

\section{Proof of Concept} \label{sec:poc}
\subfile{sections/poc}

\section{Market Research and Business Viability} \label{sec:market}
\subfile{sections/market}

\section{Project Plan} \label{sec:plan}
\subfile{sections/plan}

\end{linenumbers}

% \section{Short Guide} \label{sec:guide}
% \subfile{sections/guide}

\newpage

\printbibliography[heading=bibintoc]

\newpage

\begin{appendices}
    \subfile{sections/appendix}
\end{appendices}

\end{document}
