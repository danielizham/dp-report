\documentclass[../main.tex]{subfiles}
\graphicspath{{\subfix{../images/}}}

\begin{document}

\begin{newrequirements}
    \begin{todolist}
    \item[\done] Actual Design description with pictures 
        and diagrams. E.g., a “wiring diagram” 
        of the implemented hardware can be 
        added. 

	\item[\done] Actual images of various modules must 
        be included wherever possible. 
        Otherwise, at least the images of 
        various aspects of the completed design 
        must be shown. 

    \item[\done] List the different tools and framework 
        used for the implementation. 

    \item[\done] Discuss any novel aspects of your 
        implementation (if applicable). You may 
        link this aspect of your design to the 
        comparison table at the end of 
        literature review and elaborate on the 
        steps taken in achieving these 
        novelties in your design. 

    \item [\done] Discuss the challenges encountered 
        during the implementation and how they 
        were addressed. 

    \item [\done] You may organize any of the above 
        recommended points as subsections 

    \end{todolist}
\end{newrequirements}
In this section are going illustrate the actual design 
implementations, to achieve the design solution.
\subsection{Hardware}

The most critical parts in the hardware
architecture are the Raspberry Pi and the drone. 
We started by configuring the Raspberry Pi micro\textsc{sd} card,
flashed it with Ubuntu 20.04 desktop version,
and installed Parrot Olympe successfully in virtual environment. 
Then, we plugged in the Wi-Fi dongle adapter
in a \textsc{usb}~2.0 port in the Raspberry Pi, 
and the \textsc{os} discovered it automatically. 
There were some challenges in setting up the connection automatically 
once the Raspberry Pi boots up. We discovered that some packages were not installed properly,
so we reinstalled the whole system again, and the problems has been addressed. 


Regarding the power supply, we were thinking 
of modifying the drone's battery by removing the 
plastic shield because of the drone's payload restrictions 
and limitations, but everything changed after testing 
the drone's maximum payload.
As far as the connection, there are 
two different options as shown in \cref{fig:connection}.
For option A we can use \textsc{usb}-A to power the Raspberry directly 
without needing to solder any wires, but there is some internal resistance.
In option B, it powers the Raspberry Pi through the \textsc{gpio} 
interface by soldering two wires to the power board and 
connecting to pin 4 and 6 in the Raspberry Pi board.
This option has smaller internal resistance compared to option A.
For simplicity, we chose option A and   
followed the instruction of the manufacturer by choosing 
the thickest and shortest possible \textsc{usb} cable to reduce 
the power loss and voltage drops~\cite{makerfocus}.

As shown in \cref{fig:connection} We have printed the 3d 
parts, and because we need lightweight and strong parts, 
we have used PETG material with a 45\% fill rate, 
then we used superglue to stick all the parts together 
and make sure it's one solid piece.

\begin{figure}[p]
	\centering
	\includegraphics[width=0.5\textwidth]{parts.jpg}
	\caption{3d printed parts \& on-board computer}
	\label{fig:printed-parts}
\end{figure} 

\begin{figure}[p]
	\centering
	\includegraphics[width=0.5\textwidth]{connection.png}
	\caption{The Raspberry Pi and power board connection.}
	\label{fig:connection}
\end{figure}  

Since all the components are available as shown 
in \cref{fig:components}, we could assemble 
all the parts in one piece and started testing the whole system.
We have used the zip tie to hold the components and to
make sure everything sticks together. Then we put them in the 3d
printed case. As shown in 
\cref{fig:full-hardware}, all the parts are in one system. 
While testing it, the drone struggled to take off and balance itself
because the total weight exceeded the limit. So we
only used the on that are marked with a green dot 
as shown in \cref{fig:components} and the weight reduced to \SI{193}{gram}. 
Now the drone takeoff is normal, but the drone faces difficulty moving normally ,so we removed all 3D parts, and now the drone moves normally.


\begin{figure}[p]
	\centering
	\includegraphics[width=0.5\textwidth]{components.jpg}
	\caption{All components needed.}
	\label{fig:components}
\end{figure}

\begin{figure}[h]
	\centering
	\includegraphics[width=0.7\textwidth]{fulldronehardware.png}
	\caption{Full hardware system.}
	\label{fig:full-hardware}
\end{figure}  



\subsection{Reinforcement learning}

\lipsum[1]

\subsection{User interface}

\begin{figure}[tbp] 
	\centering
	\includegraphics[width=0.9\textwidth]{gui-use-cases} 
	\caption{This use case diagram depicts the different use cases that any authorized users can have using the website.}
	\label{fig:gui-use-cases} 
\end{figure}

Below are the list of use cases that a user can do using the AirEye website as seen in \cref{fig:gui-use-cases} : 
\begin{itemize}	
	\item The user is able to choose a certain model that is available, choosing this model will run a specific script in the drone. 
	\item The user can start the mission.
	\item The user can watch the live stream from the drone camera and refresh the stream in case of any error.
	\item The user can see the outputs of the terminal to keep track of different variables.
	\item The user can save the stream recording. 
	\item The user can end the mission.
\end{itemize}

\begin{figure}[tbp]
	\centering
	\includegraphics[width=0.99\textwidth]{gui-main-page}
	\caption{The main page of the AirEye website.}
	\label{fig:gui-main-page}
\end{figure}

Many software components were put together to produce what we have in \cref{fig:gui-main-page}, mainly: 
\begin{itemize}
	\item Olympe, the drone controller. 
	\item pyzbar, for \textsc{qr} code detection.
	\item OpenCV, huge computer vision library.
	\item \textsc{html}, \textsc{css}, and javascript for frontend web 
	development.
	\item Python Flask, backend framework.
	\item Gunicorn, \textsc{wsgi} \textsc{http} server
	\item Nginx, reverse proxy and web server. 
\end{itemize}

Many novel aspects were implemented in this website, different models could be 
made and each model is responsible for a certain type of targets, One model 
might be good for mobile targets and another could be better for fixed ones. 
Challenges were mainly faced in the backend as establishing the communication 
between the web server and the frontend was not easy to manage. Also, 
streaming live from the drone's camera to the user interface was 
difficult and new to us.



\end{document}
